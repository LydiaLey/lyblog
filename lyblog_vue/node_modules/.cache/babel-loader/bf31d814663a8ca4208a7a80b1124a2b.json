{"remainingRequest":"E:\\newProjects\\vuetest\\lyblog_vue\\node_modules\\babel-loader\\lib\\index.js!E:\\newProjects\\vuetest\\lyblog_vue\\src\\axios.js","dependencies":[{"path":"E:\\newProjects\\vuetest\\lyblog_vue\\src\\axios.js","mtime":1600223766681},{"path":"E:\\newProjects\\vuetest\\lyblog_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\newProjects\\vuetest\\lyblog_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBFbGVtZW50IGZyb20gImVsZW1lbnQtdWkiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi9zdG9yZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi9yb3V0ZXIiOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MSc7CmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uc29sZS5sb2coIuWJjee9ruaLpuaIqiIpOyAvLyDlj6/ku6Xnu5/kuIDorr7nva7or7fmsYLlpLQKCiAgcmV0dXJuIGNvbmZpZzsKfSk7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgdmFyIHJlcyA9IHJlc3BvbnNlLmRhdGE7CiAgY29uc29sZS5sb2coIuWQjue9ruaLpuaIqiIpOyAvLyDlvZPnu5PmnpznmoRjb2Rl5piv5ZCm5Li6MjAw55qE5oOF5Ya1CgogIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICByZXR1cm4gcmVzcG9uc2U7CiAgfSBlbHNlIHsKICAgIC8vIOW8ueeql+W8guW4uOS/oeaBrwogICAgRWxlbWVudC5NZXNzYWdlKHsKICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5tc2csCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiAyICogMTAwMAogICAgfSk7IC8vIOebtOaOpeaLkue7neW+gOS4i+mdoui/lOWbnue7k+aenOS/oeaBrwoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5kYXRhLm1zZyk7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBjb25zb2xlLmxvZygnZXJyJyArIGVycm9yKTsgLy8gZm9yIGRlYnVnCgogIGlmIChlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICBlcnJvci5tZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tc2c7CiAgfSAvLyDmoLnmja7or7fmsYLnirbmgIHlhrPlrprmmK/lkKbnmbvlvZXmiJbogIXmj5DnpLrlhbbku5YKCgogIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgc3RvcmUuY29tbWl0KCdSRU1PVkVfSU5GTycpOwogICAgcm91dGVyLnB1c2goewogICAgICBwYXRoOiAnL2xvZ2luJwogICAgfSk7CiAgICBlcnJvci5tZXNzYWdlID0gJ+ivt+mHjeaWsOeZu+W9lSc7CiAgfQoKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHsKICAgIGVycm9yLm1lc3NhZ2UgPSAn5p2D6ZmQ5LiN6Laz77yM5peg5rOV6K6/6ZeuJzsKICB9CgogIEVsZW1lbnQuTWVzc2FnZSh7CiAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLAogICAgdHlwZTogJ2Vycm9yJywKICAgIGR1cmF0aW9uOiAzICogMTAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOw=="},{"version":3,"sources":["E:/newProjects/vuetest/lyblog_vue/src/axios.js"],"names":["axios","Element","store","router","defaults","baseURL","interceptors","request","use","config","console","log","response","res","data","code","Message","message","msg","type","duration","Promise","reject","error","status","commit","push","path"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACAH,KAAK,CAACI,QAAN,CAAeC,OAAf,GAAuB,uBAAvB;AACAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACrCC,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EADqC,CAErC;;AACA,SAAOF,MAAP;AACH,CAJD;AAKAT,KAAK,CAACM,YAAN,CAAmBM,QAAnB,CAA4BJ,GAA5B,CAAgC,UAAAI,QAAQ,EAAI;AACpC,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;AACAJ,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAFoC,CAGpC;;AACA,MAAIE,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AAClB,WAAOH,QAAP;AACH,GAFD,MAEO;AACH;AACAX,IAAAA,OAAO,CAACe,OAAR,CAAgB;AACZC,MAAAA,OAAO,EAAEL,QAAQ,CAACE,IAAT,CAAcI,GADX;AAEZC,MAAAA,IAAI,EAAE,OAFM;AAGZC,MAAAA,QAAQ,EAAE,IAAI;AAHF,KAAhB,EAFG,CAOH;;AACA,WAAOC,OAAO,CAACC,MAAR,CAAeV,QAAQ,CAACE,IAAT,CAAcI,GAA7B,CAAP;AACH;AACJ,CAhBL,EAiBI,UAAAK,KAAK,EAAI;AACLb,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQY,KAApB,EADK,CACqB;;AAC1B,MAAGA,KAAK,CAACX,QAAN,CAAeE,IAAlB,EAAwB;AACpBS,IAAAA,KAAK,CAACN,OAAN,GAAgBM,KAAK,CAACX,QAAN,CAAeE,IAAf,CAAoBI,GAApC;AACH,GAJI,CAKL;;;AACA,MAAIK,KAAK,CAACX,QAAN,CAAeY,MAAf,KAA0B,GAA9B,EAAmC;AAC/BtB,IAAAA,KAAK,CAACuB,MAAN,CAAa,aAAb;AACAtB,IAAAA,MAAM,CAACuB,IAAP,CAAY;AACRC,MAAAA,IAAI,EAAE;AADE,KAAZ;AAGAJ,IAAAA,KAAK,CAACN,OAAN,GAAgB,OAAhB;AACH;;AACD,MAAIM,KAAK,CAACX,QAAN,CAAeY,MAAf,KAA0B,GAA9B,EAAmC;AAC/BD,IAAAA,KAAK,CAACN,OAAN,GAAgB,WAAhB;AACH;;AACDhB,EAAAA,OAAO,CAACe,OAAR,CAAgB;AACZC,IAAAA,OAAO,EAAEM,KAAK,CAACN,OADH;AAEZE,IAAAA,IAAI,EAAE,OAFM;AAGZC,IAAAA,QAAQ,EAAE,IAAI;AAHF,GAAhB;AAKA,SAAOC,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAP;AACH,CAvCL","sourcesContent":["import axios from 'axios'\r\nimport Element from \"element-ui\";\r\nimport store from \"./store\";\r\nimport router from \"./router\";\r\naxios.defaults.baseURL='http://localhost:8081'\r\naxios.interceptors.request.use(config => {\r\n    console.log(\"前置拦截\")\r\n    // 可以统一设置请求头\r\n    return config\r\n})\r\naxios.interceptors.response.use(response => {\r\n        const res = response.data;\r\n        console.log(\"后置拦截\")\r\n        // 当结果的code是否为200的情况\r\n        if (res.code === 200) {\r\n            return response\r\n        } else {\r\n            // 弹窗异常信息\r\n            Element.Message({\r\n                message: response.data.msg,\r\n                type: 'error',\r\n                duration: 2 * 1000\r\n            })\r\n            // 直接拒绝往下面返回结果信息\r\n            return Promise.reject(response.data.msg)\r\n        }\r\n    },\r\n    error => {\r\n        console.log('err' + error)// for debug\r\n        if(error.response.data) {\r\n            error.message = error.response.data.msg\r\n        }\r\n        // 根据请求状态决定是否登录或者提示其他\r\n        if (error.response.status === 401) {\r\n            store.commit('REMOVE_INFO');\r\n            router.push({\r\n                path: '/login'\r\n            });\r\n            error.message = '请重新登录';\r\n        }\r\n        if (error.response.status === 403) {\r\n            error.message = '权限不足，无法访问';\r\n        }\r\n        Element.Message({\r\n            message: error.message,\r\n            type: 'error',\r\n            duration: 3 * 1000\r\n        })\r\n        return Promise.reject(error)\r\n    })\r\n"]}]}